# HandyJSON原理
#iOS知识点/第三方库

 [HandyJSON](https://link.jianshu.com/?t=https://github.com/alibaba/HandyJSON) 

# Swift中，类实例的内存布局规律：
1. 32位机器上，类前面有4+8个字节存储meta信息，64位机器上，有8+8个字节；
2. 内存中，字段从前往后有序排列；
3. 如果该类继承自某一个类，那么父类的字段在前；
4. Optional会增加一个字节来存储.None/.Some信息；
5. 每个字段需要考虑内存对齐；

# HandyJSON原理
1. 获取它的起始指针，移动到有效起点；
2. 通过Mirror获取每一个字段的字段名和字段类型；
3. 根据字段名在JSON中取值，转换为和字段一样的类型，通过指针写入；
4. 根据本字段类型的占位大小和下一个字段类型计算下一个字段的对齐起点；
5. 移动指针，继续处理；
![](HandyJSON%E5%8E%9F%E7%90%86/2A983CB8-4923-4E99-9976-BF0B5211761B.png)

