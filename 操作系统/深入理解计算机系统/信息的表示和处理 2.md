# 信息的表示和处理
#操作系统/CSAPP


# 信息的二进制编码
机器级数据分两大类
数值数据：无符号整数、带符号整数、浮点数（实数）
非数值数据：逻辑数（包括位串）、西文字符和汉字

真值和机器数 ( 非常重要的概念！)
机器数：用0和1编码的计算机内部的0/1序列。
真值：真正的值，即：现实中带正负号的数。
例：unsigned short型变量x的真值是127，其机器数是多少？ 127=2^7-1，其机器数为0000 0000 0111 1111

计算机内部所有信息都用二进制（即：0和1）编码的原因？
1. 制造二个稳定态的物理器件容易(电位高/低，脉冲有/无，正/负极)
2. 二进制编码、计数、运算规则简单
3. 正好与逻辑命题真/假对应，便于逻辑运算
4. 可方便地用逻辑电路实现算术运算

# 数值数据的表示三要素
### 进位计数制
十进制、二进制、十六进制、八进制数及其相互转换
### 定/浮点表示（解决小数点问题）
定点整数（有符号整数、无符号整数）、定点小数
浮点数（可用一个定点小数和一个定点整数来表示）
### 如何用二进制编码（解决正负号问题）
原码、补码、反码、移码 （反码很少用）

即：要确定一个数值数据的值必须先确定这三个要素。 例如，20137564的值是多少？
现实中的精确值可能在机器内部无法用0和1精确表示！

![](%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/2507A96A-6CA2-4E44-BFDC-DA034FAE463B.png)


# 定点数的编码表示
## 原码Sign and Magnitude）
用0和1来表示正负，数置部分不变。
60年代开始，整数都采用补码来表示，但浮点数的尾数用原码定点小数表示。

## 模运算和补码(2’s complement）
计算机中的运算器是模运算系统，在一个模运算系统中，一个数与它除以“模”后的余数等价。比如时钟是现实中的模12运算系统，18mod12=6，18点和6点是等价的，把一个指向10点的时钟拨向6点，可以有如下有2种方式，顺时针：10-4=6， 逆时针：10+8=18=6。这时候称8是-4对模12的补码，假定机器数为n位，则X补=2^n+X。

1. 一个负数的补码等于模减该负数的绝对值。
2. 对于确定的模，某数减去小于模的另一数，总可以用该数加上另一数负数的补码来代替（加减运算统一）

### 真值和补码的相互转换
1. 正整数的补码=自己
2. 负整数的补码=对应正整数从右向左遇到第一个1的前面各位取反
3. 符号为0的补码表示机器数，真值为正数，数值部分相等。
4. 符号为1的补码表示机器数，真值为负数，数值部分各位取反，末位+1。
🌰：假设机器数为8位，求123和-123的补码？
123=01111011B，123补=2^8+01111011B=01111011B=7BH
-123=-01111011B，-123补=2^8-01111011B=10000101B=85H

## 变形补码（4’s comlement）
双符号位，用于存放可能溢出的中间结果。
![](%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/AD168CB1-AD95-4DB2-A70D-7F454C7A1254.png)

## 移码
将每一个数值加上一个偏置常数（ Excess / bias）后的编码叫做移码。通常，当编码位数为n时，bias取 2^(n-1)或 2^(n-1)-1（如 IEEE 754）。
比如某个数E，当编码位数为4位时，E移码=E+2^3（bias=2^=1000B）。
-8的移码表示为0000B
-7的移码表示为0001B
0的移码表示为1000B
+7的移码表示为1111B

0的移码表示是唯一的，当bias为 2^n-1 时，移码和补码仅第一位不同，移码主要用来表示浮点数的阶，便于进行运算时的对阶操作。
🌰：求1.01x2^-1 + 1.11x2^3
浮点运算需要先对用补码对阶，则111 < 011 ，用移码表示则011 < 111,




















# 附件
![](%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/49314540-DE77-49C2-958C-62A2052CB9C5.png)
![](%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/B7BDF5A1-31E6-424A-994A-7327C3D56CAD.png)

![](%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/F6BB5412-9BFA-4F37-BCDD-4FE67C23B961.png)




