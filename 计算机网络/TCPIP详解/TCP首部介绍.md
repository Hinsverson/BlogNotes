# TCP首部介绍
#计算机网络/TCPIP

<a href='TCPIP%E9%83%A8%E5%88%86-%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D.pdf'>TCPIP部分-首部介绍.pdf</a>

# TCP报文格式的理解
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/777ADE4A-79C0-4D1B-8255-D67B24385FB2.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/7BD51887-46BF-4D14-A539-09A55C22BBB8.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/2545194E-63E3-4676-B60D-C4CC3F9998A5.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/C92BCA90-BA23-408F-BDC8-F4C204E427FC.png)![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/CCE9BAC1-9F7B-4412-A851-12B45E300C3B.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/416B5C2F-5B46-4EF2-BD40-E853585B23BA.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/CEB6E41F-7024-4A55-A8AB-CFB9F629B5AB.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/A3D8F211-3589-47CB-80FC-704FBAC13A39.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/97593890-227A-4435-89A7-01E59C6C9ED5.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/8225034E-1F24-41B9-959F-B531E3BA2068.png)
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/7378BC90-5391-4CE3-8C45-D18011DE5CE7.png)

**TCP首部长度**：
占4bit，单位是4个字节，表示首部长度。
**TCP首部标志位**
SYN和FIN被置为1时，虽然没有负载但是会消耗1个序号，ack不会。
**窗口大小**
TCP窗口位占16位，最大表示65535bety，但对于现今的百兆千兆网来说还是太小了，所以同时TCP选项里面有一个窗口扩大因子允许按比例放大这个窗口，用来应对现今的网络环境。
**报文段校验和**
通过添加尾首部，发端计算，收端验证。校验面向的是整个TCP包文段，注意和IP首部校验和区分开。
**紧急指针和URG标志位**
URG标志位为1时，16位紧急指针才有效。
**选项部分**
占32位，一般可用来传递如下信息：
MSS最大报文段长度(Maxium Segment Size)：SYN时
窗口扩大选项(Windows Scaling)：扩大窗口因子，应对前兆级别网络带宽。
SACK选择确认项：新特性，用来确保只重传缺少的报文段，而不是重传所有报文段。
时间戳选项：计算RTT(往返时间)，发送方发送TCP报文时写入
NOP(NO-Operation)：4字节对齐

## 选项-窗口扩大因子
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/964885BB-8F04-4AD1-A35D-059248B261ED.png)

## 选项-SACK选择确认
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/154596FC-BBE7-4785-AC80-9DAA5D9A9D56.png)
用来确保只重传缺少的报文段，而不是重传所有报文段。
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/7F746AEE-1491-48B9-B92A-28FCEE946E31.png)

# TCP中的吞吐量
![](TCP%E9%A6%96%E9%83%A8%E4%BB%8B%E7%BB%8D/7B260254-4447-4E84-B2D7-F1062F0B7FA2.png)




